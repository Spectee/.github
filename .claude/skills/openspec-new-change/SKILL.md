---
name: openspec-new-change
description: 実験的なアーティファクトワークフローを使用して新しいOpenSpec変更を開始。ユーザーが構造化されたステップバイステップアプローチで新機能、修正、または変更を作成したい場合に使用。
license: MIT
compatibility: openspec CLIが必要。
metadata:
  author: openspec
  version: "1.0"
  generatedBy: "1.0.2"
---

実験的なアーティファクト駆動アプローチを使用して新しい変更を開始します。

**入力**: ユーザーのリクエストには変更名（ケバブケース）または構築したいものの説明が含まれるべき。

**手順**

1. **明確な入力が提供されていない場合、何を構築したいか尋ねる**

   **AskUserQuestionツール**（オープンエンド、プリセットオプションなし）を使用して尋ねる：
   > 「どの変更に取り組みたいですか？構築または修正したいものを説明してください。」

   説明からケバブケース名を導出（例：「add user authentication」→ `add-user-auth`）。

   **重要**: ユーザーが何を構築したいか理解せずに進めない。

2. **ワークフロースキーマを決定**

   ユーザーが明示的に異なるワークフローをリクエストしない限り、デフォルトスキーマを使用（`--schema`を省略）。

   **異なるスキーマを使用するのはユーザーが言及した場合のみ：**
   - 特定のスキーマ名 → `--schema <name>`を使用
   - 「show workflows」や「what workflows」 → `openspec schemas --json`を実行して選択させる

   **それ以外**: `--schema`を省略してデフォルトを使用。

3. **変更ディレクトリを作成**
   ```bash
   openspec new change "<name>"
   ```
   ユーザーが特定のワークフローをリクエストした場合のみ`--schema <name>`を追加。
   これにより選択されたスキーマで`openspec/changes/<name>/`にスキャフォールドされた変更が作成される。

4. **アーティファクトの状態を表示**
   ```bash
   openspec status --change "<name>"
   ```
   これにより、どのアーティファクトを作成する必要があり、どれが準備完了（依存関係が満たされている）かが表示される。

5. **最初のアーティファクトの指示を取得**
   最初のアーティファクトはスキーマによって異なる（例：spec-drivenでは`proposal`）。
   状態出力を確認して、状態が「ready」の最初のアーティファクトを見つける。
   ```bash
   openspec instructions <first-artifact-id> --change "<name>"
   ```
   これにより最初のアーティファクト作成のためのテンプレートとコンテキストが出力される。

6. **停止してユーザーの指示を待つ**

**出力**

手順完了後、要約：
- 変更名と場所
- 使用しているスキーマ/ワークフローとそのアーティファクトシーケンス
- 現在の状態（0/Nアーティファクト完了）
- 最初のアーティファクトのテンプレート
- プロンプト：「最初のアーティファクトを作成する準備はできましたか？この変更について説明してください、下書きします。または続行を依頼してください。」

**ガードレール**
- まだアーティファクトを作成しない - 指示を表示するだけ
- 最初のアーティファクトテンプレートの表示以上に進めない
- 名前が無効（ケバブケースでない）な場合、有効な名前を尋ねる
- その名前の変更が既に存在する場合、代わりにその変更を続けることを提案
- デフォルト以外のワークフローを使用する場合は--schemaを渡す
